"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@reach/auto-id"),n=require("@reach/utils"),o=require("@reach/portal"),i=require("@reach/visually-hidden"),r=require("@reach/rect");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("prop-types");var u,l,E,s,f,c,d=a(e),p=a(o),S=a(i);function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)t.indexOf(n=r[o])>=0||(i[n]=e[n]);return i}var O,v,M={initial:"IDLE",states:(c={},c.IDLE={enter:h,on:(u={},u.MOUSE_ENTER="FOCUSED",u.FOCUS="VISIBLE",u)},c.FOCUSED={enter:function(){window.clearTimeout(O),O=window.setTimeout((function(){return R("REST")}),100)},leave:function(){window.clearTimeout(O)},on:(l={},l.MOUSE_MOVE="FOCUSED",l.MOUSE_LEAVE="IDLE",l.MOUSE_DOWN="DISMISSED",l.BLUR="IDLE",l.REST="VISIBLE",l)},c.VISIBLE={on:(E={},E.FOCUS="FOCUSED",E.MOUSE_ENTER="FOCUSED",E.MOUSE_LEAVE="LEAVING_VISIBLE",E.BLUR="LEAVING_VISIBLE",E.MOUSE_DOWN="DISMISSED",E.SELECT_WITH_KEYBOARD="DISMISSED",E.GLOBAL_MOUSE_MOVE="LEAVING_VISIBLE",E)},c.LEAVING_VISIBLE={enter:function(){window.clearTimeout(v),v=window.setTimeout((function(){return R("TIME_COMPLETE")}),500)},leave:function(){window.clearTimeout(v),h()},on:(s={},s.MOUSE_ENTER="VISIBLE",s.FOCUS="VISIBLE",s.TIME_COMPLETE="IDLE",s)},c.DISMISSED={leave:function(){w.id=null},on:(f={},f.MOUSE_LEAVE="IDLE",f.BLUR="IDLE",f)},c)},w={id:null},D=M.initial,_=[];function h(){w.id=null}function b(o){var i=void 0===o?{}:o,a=i.onMouseEnter,u=i.onMouseMove,l=i.onMouseLeave,E=i.onFocus,s=i.onBlur,f=i.onKeyDown,c=i.onMouseDown,d=i.ref,p=i.DEBUG_STYLE,S=String(t.useId(i.id)),L=e.useState(!!p||null!==S&&w.id===S&&"VISIBLE"===D),I=L[0],O=L[1],v=e.useRef(null),M=n.useForkedRef(d,v),h=r.useRect(v,I);return e.useEffect((function(){return _.push(e=function(){O(w.id===S&&("VISIBLE"===D||"LEAVING_VISIBLE"===D))}),function(){_.splice(_.indexOf(e),1)};var e}),[S]),e.useEffect((function(){return n.checkStyles("tooltip")}),[]),e.useEffect((function(){var e=n.getOwnerDocument(v.current)||document;function t(e){"Escape"!==e.key&&"Esc"!==e.key||"VISIBLE"!==D||R("SELECT_WITH_KEYBOARD")}return e.addEventListener("keydown",t),function(){return e.removeEventListener("keydown",t)}}),[]),[{"aria-describedby":I?n.makeId("tooltip",S):void 0,"data-reach-tooltip-trigger":"",ref:M,onMouseEnter:n.wrapEvent(a,(function(){R("MOUSE_ENTER",{id:S})})),onMouseMove:n.wrapEvent(u,(function(){R("MOUSE_MOVE",{id:S})})),onFocus:n.wrapEvent(E,(function(){window.__REACH_DISABLE_TOOLTIPS||R("FOCUS",{id:S})})),onBlur:n.wrapEvent(s,(function(){w.id===S&&R("BLUR")})),onMouseLeave:n.wrapEvent(l,(function(){R("MOUSE_LEAVE")})),onKeyDown:n.wrapEvent(f,(function(e){"Enter"!==e.key&&" "!==e.key||R("SELECT_WITH_KEYBOARD")})),onMouseDown:n.wrapEvent(c,(function(){w.id===S&&R("MOUSE_DOWN")}))},{id:S,triggerRect:h,isVisible:I},I]}var T=n.forwardRefWithAs((function(t,n){var o=t.children,i=t.label,r=t.ariaLabel,a=t.id,u=t.DEBUG_STYLE,l=I(t,["children","label","ariaLabel","id","DEBUG_STYLE"]),E=e.Children.only(o),s=b({id:a,onMouseEnter:E.props.onMouseEnter,onMouseMove:E.props.onMouseMove,onMouseLeave:E.props.onMouseLeave,onFocus:E.props.onFocus,onBlur:E.props.onBlur,onKeyDown:E.props.onKeyDown,onMouseDown:E.props.onMouseDown,ref:E.ref,DEBUG_STYLE:u}),f=s[1];return d.default.createElement(e.Fragment,null,e.cloneElement(E,s[0]),d.default.createElement(U,Object.assign({ref:n,label:i,"aria-label":r},f,l)))})),U=n.forwardRefWithAs((function(e,t){var o=e.label,i=e.ariaLabel,r=e.isVisible,a=e.id,u=I(e,["label","ariaLabel","isVisible","id"]);return r?d.default.createElement(p.default,null,d.default.createElement(V,Object.assign({ref:t,label:o,"aria-label":i,isVisible:r},u,{id:n.makeId("tooltip",String(a))}))):null})),V=n.forwardRefWithAs((function(t,o){var i=t.ariaLabel,a=t["aria-label"],u=t.as,l=void 0===u?"div":u,E=t.id,s=t.isVisible,f=t.label,c=t.position,p=void 0===c?B:c,O=t.style,v=t.triggerRect,M=I(t,["ariaLabel","aria-label","as","id","isVisible","label","position","style","triggerRect"]),w=null!=(a||i),D=e.useRef(null),_=n.useForkedRef(o,D),h=r.useRect(D,s);return d.default.createElement(e.Fragment,null,d.default.createElement(l,Object.assign({role:w?void 0:"tooltip"},M,{ref:_,"data-reach-tooltip":"",id:w?void 0:E,style:L({},O,g(p,v,h))}),f),w&&d.default.createElement(S.default,{role:"tooltip",id:E},a||i))}));function g(e,t,n){return n?e(t,n):{visibility:"hidden"}}var B=function(e,t){var o=n.getDocumentDimensions();return e&&t?{left:o.width<e.left+t.width&&!(e.left-t.width<0)?e.right-t.width+window.pageXOffset+"px":e.left+window.pageXOffset+"px",top:o.height<e.bottom+t.height+8&&!(e.top-t.height<0)?e.top-8-t.height+window.pageYOffset+"px":e.top+8+e.height+window.pageYOffset+"px"}:{}},R=function(e,t){var n=M.states[D],o=n&&n.on&&n.on[e];if(o){n&&n.leave&&n.leave(),t&&(w=t);var i=M.states[o];i&&i.enter&&i.enter(),D=o,_.forEach((function(e){return e(D,w)}))}};exports.LEAVE_TIMEOUT=500,exports.MOUSE_REST_TIMEOUT=100,exports.Tooltip=T,exports.TooltipPopup=U,exports.default=T,exports.useTooltip=b;
//# sourceMappingURL=tooltip.cjs.production.min.js.map
